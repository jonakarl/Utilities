#!/bin/bash
set -e

# generate a unique static IP for each interface name metadata is .0.1
# $1 - interface name (e.g wwan0)
# $2 - IP range to map to (e.g 172.18)

IF=$1 
VETH_IPRANGE=$2

echo -n "$VETH_IPRANGE."
echo $IF | sed -e 's/\([^0-9]\+\)\([0-9]\+\)/\2-\1/g' \
    -e 's/-nlw_/1/g' \
    -e 's/-ppp/2/g' \
    -e 's/-eth/3/g' \
    -e 's/-usb/4/g' \
    -e 's/-wlan/5/g' \
    -e 's/-wwan/6/g' \
    -e 's/^0*//g'